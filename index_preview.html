<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Preview • DJ MK | Beats</title>
  <meta name="description" content="Pré-visualização da vitrine de beats estilo streaming." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
  :root{
    --bg:#0b0b0f; --card:#141419; --text:#ebebf0; --muted:#a0a0ad;
    --primary:#c71aff; --accent:#05d47e; --line:rgba(255,255,255,.08);
    --shadow:0 10px 30px rgba(0,0,0,.45); --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}
  button{cursor:pointer}
  .hdr{position:sticky;top:0;z-index:50;backdrop-filter:blur(10px);background:linear-gradient(180deg,rgba(11,11,15,.9),rgba(11,11,15,.6) 70%,rgba(11,11,15,0));border-bottom:1px solid var(--line)}
  .hdr__inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px;padding:12px 16px}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.5px}
  .brand__logo{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--primary),#6a00ff);box-shadow:var(--shadow)}
  .brand__name{font-size:18px}
  .search{flex:1;display:flex}
  .search input{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:#0f0f14;color:var(--text);outline:none}
  .social{display:flex;gap:10px}
  .ico{width:38px;height:38px;display:grid;place-items:center;border-radius:10px;border:1px solid var(--line);background:#0f0f14}
  .ico svg{width:22px;height:22px}
  .hero{max-width:1200px;margin:8px auto 16px;padding:0 16px}
  .hero__inner{background:radial-gradient(1100px 380px at 20% -10%,rgba(199,26,255,.22),transparent 50%),radial-gradient(800px 300px at 90% 0%,rgba(5,212,126,.15),transparent 50%),linear-gradient(180deg,#111118,#0b0b0f);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px;display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
  .hero__art{aspect-ratio:16/9;border-radius:14px;overflow:hidden;border:1px solid var(--line)}
  .badges{display:flex;gap:8px;flex-wrap:wrap}
  .badge{font-size:12px;padding:6px 10px;background:#0f0f14;border:1px solid var(--line);border-radius:999px;color:#cfcfe6}
  @media(max-width:780px){.hero__inner{grid-template-columns:1fr}}
  .row{max-width:1200px;margin:8px auto;padding:0 16px}
  .row h2{margin:12px 0;font-size:18px;font-weight:700}
  .scroller{display:grid;grid-auto-flow:column;grid-auto-columns:52vw;gap:12px;overflow-x:auto;overscroll-behavior-x:contain;padding-bottom:8px}
  @media(min-width:540px){.scroller{grid-auto-columns:33vw}}
  @media(min-width:920px){.scroller{grid-auto-columns:22vw}}
  @media(min-width:1200px){.scroller{grid-auto-columns:18vw}}
  .card{position:relative;border-radius:12px;overflow:hidden;background:var(--card);border:1px solid var(--line)}
  .cover{aspect-ratio:1/1;object-fit:cover;width:100%}
  .card__info{position:absolute;inset:auto 0 0 0;padding:10px;background:linear-gradient(180deg,transparent,rgba(0,0,0,.75))}
  .title{font-weight:700;font-size:14px;text-shadow:0 1px 2px rgba(0,0,0,.4)}
  .meta{font-size:12px;color:#cfcfe6;opacity:.85;display:flex;gap:8px;align-items:center}
  .card__play{position:absolute;inset:10px 10px auto auto;width:38px;height:38px;border-radius:999px;background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.12);display:grid;place-items:center}
  .buybtn{position:absolute;inset:auto 10px 10px auto;padding:8px 10px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#00a86b);border:none;font-weight:800;font-size:12px}
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.6);backdrop-filter:blur(6px);z-index:100}
  .modal.show{display:grid;animation:fadeIn .2s ease-out}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  .dlg{width:min(920px,96vw);background:#0e0e14;border:1px solid var(--line);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);position:relative}
  .dlg__close{position:absolute;top:8px;right:10px;width:40px;height:40px;border-radius:999px;border:1px solid var(--line);background:#141419;color:#fff;font-size:26px;line-height:1}
  .dlg__grid{display:grid;grid-template-columns:1fr 1.6fr;gap:14px;padding:16px}
  .dlg__cover{border-radius:12px;overflow:hidden;border:1px solid var(--line)}
  .kv{font-size:13px;color:var(--muted);display:grid;gap:6px}
  .audio{width:100%}
  .dlg__actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .btn{background:#15151b;color:#fff;padding:10px 14px;border:1px solid var(--line);border-radius:12px;font-weight:600}
  .btn.primary{background:linear-gradient(135deg,var(--primary),#6a00ff);border:none}
  @media(max-width:780px){.dlg__grid{grid-template-columns:1fr}}
  .ftr{border-top:1px solid var(--line);margin-top:20px}
  .ftr__inner{max-width:1200px;margin:0 auto;padding:16px;display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center}
  .ftr__brand{font-weight:700}
  .ftr__hint{font-size:12px;color:var(--muted)}
  .ftr__links{display:flex;gap:10px}
  </style>
</head>
<body>
  <header class="hdr">
    <div class="hdr__inner">
      <a class="brand" href="#" aria-label="Página inicial">
        <div class="brand__logo">MK</div>
        <span class="brand__name">Beats</span>
      </a>
      <div class="search" role="search">
        <input id="q" placeholder="Buscar por nome, gênero, BPM ou tom…" autocomplete="off" />
      </div>
      <nav class="social">
        <a class="ico" href="https://wa.me/5541998949082" target="_blank" rel="noopener" aria-label="WhatsApp">
          <svg viewBox="0 0 32 32" aria-hidden="true"><path d="M19.1 17.3c-.3-.1-1.8-.9-2.1-1s-.5-.1-.7.1-.8 1-.9 1.1-.3.2-.6.1-1.3-.5-2.4-1.5c-.9-.8-1.5-1.8-1.7-2.1s0-.5.1-.6l.4-.5c.1-.1.2-.3.3-.5.1-.2 0-.4 0-.5 0-.1-.7-1.7-1-2.3-.2-.6-.5-.5-.7-.5h-.7c-.2 0-.5.1-.7.3-.2.3-.9.9-.9 2.2s.9 2.6 1 2.8c.1.2 1.8 2.9 4.3 4 2.6 1.2 2.6.8 3.1.8.4 0 1.6-.6 1.8-1.2.2-.6.2-1.2.1-1.3 0-.1-.2-.1-.5-.2z" fill="currentColor"/><path d="M16 3a13 13 0 0 0-11.2 19.6L3 29l6.6-1.7A13 13 0 1 0 16 3zm0 23.7a10.6 10.6 0 0 1-5.4-1.5l-.4-.2-3.9 1 1-3.8-.2-.4A10.6 10.6 0 1 1 16 26.7z" fill="currentColor"/></svg>
        </a>
        <a class="ico" href="https://instagram.com/djmkbrasil" target="_blank" rel="noopener" aria-label="Instagram">
          <svg viewBox="0 0 512 512" aria-hidden="true"><path d="M349.33 69.33H162.67A93.44 93.44 0 0 0 69.33 162.67v186.66A93.44 93.44 0 0 0 162.67 442.67h186.66A93.44 93.44 0 0 0 442.67 349.33V162.67A93.44 93.44 0 0 0 349.33 69.33zm61.34 280a61.43 61.43 0 0 1-61.34 61.34H162.67a61.43 61.43 0 0 1-61.34-61.34V162.67a61.43 61.43 0 0 1 61.34-61.34h186.66a61.43 61.43 0 0 1 61.34 61.34z" fill="currentColor"/><path d="M377.33 162.67a28.44 28.44 0 1 1 28.44-28.44 28.44 28.44 0 0 1-28.44 28.44zM256 149.33A106.67 106.67 0 1 0 362.67 256 106.79 106.79 0 0 0 256 149.33zm0 176A69.33 69.33 0 1 1 325.33 256 69.41 69.41 0 0 1 256 325.33z" fill="currentColor"/></svg>
        </a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="hero__inner">
        <div>
          <h1>Beats por DJ MK</h1>
          <p>Explore os lançamentos, filtre por gênero, BPM e tom, e ouça em alta. Layout fluido, estilo streaming.</p>
          <div class="badges">
            <span class="badge">Mobile first</span>
            <span class="badge">Player embutido</span>
            <span class="badge">JSON dinâmico</span>
          </div>
        </div>
        <div class="hero__art">
          <img alt="Mockup da vitrine de beats" src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=1200&auto=format&fit=crop" loading="lazy" />
        </div>
      </div>
    </section>

    <section class="row">
      <h2>Novos Beats</h2>
      <div class="scroller" id="row-new" aria-live="polite"></div>
    </section>

    <section class="row">
      <h2>Trap / Rap</h2>
      <div class="scroller" id="row-trap" aria-live="polite"></div>
    </section>

    <section class="row">
      <h2>Funk / BR</h2>
      <div class="scroller" id="row-funk" aria-live="polite"></div>
    </section>

    <section class="row">
      <h2>Lo-Fi / Chill</h2>
      <div class="scroller" id="row-lofi" aria-live="polite"></div>
    </section>
  </main>

  <footer class="ftr">
    <div class="ftr__inner">
      <div>
        <div class="ftr__brand">DJ MK • Loja de Beats</div>
        <div class="ftr__hint">
          Contato: <a href="mailto:djmkbrasil@gmail.com">djmkbrasil@gmail.com</a> •
          WhatsApp <a href="https://wa.me/5541998949082" target="_blank" rel="noopener">(41) 99894-9082</a>
        </div>
      </div>
      <div class="ftr__links">
        <a href="https://instagram.com/djmkbrasil" target="_blank" rel="noopener">Instagram</a>
        <a href="https://www.djmkbrasil.com.br" target="_blank" rel="noopener">Site</a>
      </div>
    </div>
  </footer>

  <div class="modal" id="player" role="dialog" aria-modal="true" aria-labelledby="player-title">
    <div class="dlg">
      <button class="dlg__close" id="btn-close" aria-label="Fechar">×</button>
      <div class="dlg__grid">
        <div class="dlg__cover"><img id="p-cover" alt="Capa do beat" /></div>
        <div class="dlg__info">
          <h3 id="player-title">—</h3>
          <div class="kv">
            <div><b>Gênero:</b> <span id="p-genre"></span></div>
            <div><b>BPM:</b> <span id="p-bpm"></span> • <b>Tom:</b> <span id="p-key"></span></div>
            <div><b>Preço:</b> R$ <span id="p-price"></span> • <b>Licença:</b> <span id="p-lic"></span></div>
            <div><b>Tags:</b> <span id="p-tags"></span></div>
          </div>
          <audio id="p-audio" controls preload="none" class="audio"></audio>
          <div class="dlg__actions">
            <a id="p-buy" class="btn primary" target="_blank" rel="noopener">Comprar este beat</a>
            <a id="p-open-audio" class="btn" target="_blank" rel="noopener">Abrir áudio</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // Inline catalog for preview (no fetch)
  const INLINE = {
    "items": [
      {
        "id": "seed1",
        "title": "Midnight Bounce",
        "genre": "Trap",
        "bpm": 140,
        "key": "Am",
        "price": 149.9,
        "license": "Basic",
        "cover": "https://images.unsplash.com/photo-1506157786151-b8491531f063?q=80&w=1200&auto=format&fit=crop",
        "audio": "https://cdn.pixabay.com/download/audio/2022/03/15/audio_0f2f4548a4.mp3?filename=trap-future-140-bpm-21016.mp3",
        "buy": "#",
        "tags": ["dark","808","bouncy"],
        "createdAt": 1710000000000
      },
      {
        "id": "seed2",
        "title": "Favela Bounce",
        "genre": "Funk BR",
        "bpm": 130,
        "key": "Bm",
        "price": 129.9,
        "license": "Basic",
        "cover": "https://images.unsplash.com/photo-1614853035986-8a2b792e66d3?q=80&w=1200&auto=format&fit=crop",
        "audio": "https://cdn.pixabay.com/download/audio/2022/03/29/audio_1d2b6e9dbe.mp3?filename=hip-hop-rap-instrumental-112199.mp3",
        "buy": "#",
        "tags": ["funk","br","808"],
        "createdAt": 1711000000000
      },
      {
        "id": "seed3",
        "title": "Cloud Steps",
        "genre": "Lo-Fi",
        "bpm": 85,
        "key": "Gm",
        "price": 99.9,
        "license": "Basic",
        "cover": "https://images.unsplash.com/photo-1526312426976-593c2b999fb0?q=80&w=1200&auto=format&fit=crop",
        "audio": "https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c1e06b449.mp3?filename=lofi-study-112191.mp3",
        "buy": "#",
        "tags": ["lofi","study","chill"],
        "createdAt": 1712000000000
      }
    ]
  };

  const $ = (s)=>document.querySelector(s);
  let CATALOG = (INLINE.items || []).map(normalizeItem);

  const rows = {
    new: $('#row-new'),
    trap: $('#row-trap'),
    funk: $('#row-funk'),
    lofi: $('#row-lofi'),
  };

  function normalizeItem(it){
    return {
      id: it.id || uid(),
      title: it.title || 'Beat',
      genre: it.genre || 'Trap',
      bpm: Number(it.bpm) || 140,
      key: it.key || 'Am',
      price: Number(it.price) || 0,
      license: it.license || 'Basic',
      cover: it.cover || '',
      audio: it.audio || '',
      buy: it.buy || '',
      tags: Array.isArray(it.tags) ? it.tags : String(it.tags||'').split(',').map(s=>s.trim()).filter(Boolean),
      createdAt: Number(it.createdAt) || Date.now(),
    };
  }
  function uid(){ return Math.random().toString(36).slice(2) + Date.now().toString(36); }
  function escapeHtml(s=''){ return s.replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",""":"&quot;","'":"&#39;"}[m])); }
  function escapeAttr(s=''){ return String(s||'').replace(/"/g,'&quot;'); }

  function card(item){
    const el = document.createElement('article'); el.className = 'card';
    el.innerHTML = `
      <img class="cover" loading="lazy" alt="Capa do beat ${escapeHtml(item.title)}" src="${escapeAttr(item.cover)}"/>
      <button class="card__play" data-id="${item.id}" aria-label="Ouvir">▶</button>
      <a class="buybtn" href="${escapeAttr(item.buy)}" target="_blank" rel="noopener">Comprar</a>
      <div class="card__info">
        <div class="title">${escapeHtml(item.title)}</div>
        <div class="meta">${escapeHtml(item.genre)} • ${item.bpm} BPM • ${escapeHtml(item.key)}</div>
      </div>`;
    el.querySelector('.card__play').addEventListener('click', (e)=>{ e.stopPropagation(); openPlayer(item.id); });
    el.addEventListener('click', (e)=>{ if(!(e.target.closest('a')||e.target.closest('button'))) openPlayer(item.id) });
    return el;
  }

  function renderAll(){
    const sorted = [...CATALOG].sort((a,b)=> b.createdAt - a.createdAt);
    rows.new.innerHTML=''; rows.trap.innerHTML=''; rows.funk.innerHTML=''; rows.lofi.innerHTML='';
    sorted.forEach(item=>{
      rows.new.appendChild(card(item));
      if(/trap|rap/i.test(item.genre)) rows.trap.appendChild(card(item));
      if(/funk|br/i.test(item.genre)) rows.funk.appendChild(card(item));
      if(/lo-?fi|chill/i.test(item.genre)) rows.lofi.appendChild(card(item));
    });
  }

  // Player
  const modal = $('#player');
  $('#btn-close').addEventListener('click', ()=> modal.classList.remove('show'));
  modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.classList.remove('show'); });
  function openPlayer(id){
    const it = CATALOG.find(x=>x.id===id); if(!it) return;
    $('#player-title').textContent = it.title;
    $('#p-genre').textContent = it.genre;
    $('#p-bpm').textContent = it.bpm;
    $('#p-key').textContent = it.key;
    $('#p-price').textContent = it.price.toFixed(2);
    $('#p-lic').textContent = it.license || '—';
    $('#p-tags').textContent = it.tags?.join(', ') || '—';
    $('#p-cover').src = it.cover;
    const audio = $('#p-audio'); audio.src = it.audio; audio.currentTime = 0; audio.play().catch(()=>{});
    $('#p-buy').href = it.buy || '#';
    document.getElementById('p-open-audio').href = it.audio || '#';
    modal.classList.add('show');
  }

  renderAll();
  </script>
</body>
</html>
